!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactDialKnob={},e.React)}(this,function(e,l){"use strict";var u="default"in l?l.default:l,h=function(){return(h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=(t.prototype.updateFromProps=function(e){if(e.max<=e.min||e.max<e.min+e.step)throw Error("Max value should be bigger or equal to min+step value.");if(this.min=e.min,this.max=e.max,this.step=e.step,this.diameter=e.diameter,this.onAngleChange=e.onAngleChange||this.onAngleChange,this.onValueChange=e.onValueChange||this.onValueChange,this.onInteractionChange=e.onInteractionChange||this.onInteractionChange,this.spaceMaxFromZero=void 0===e.spaceMaxFromZero||e.spaceMaxFromZero,e.value!==this.value&&(this.value=this.value<e.min||e.value<e.min?e.min:e.max<this.value||e.max<e.value?e.max:e.value,this.angle=this.angleFromValue(this.value)),this.value%this.step||(this.max-this.min)%this.step)throw Error("Value and (max - min) should be divisible by step.")},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle!==e&&(this._angle=e,this.onAngleChange&&this.onAngleChange(this._angle))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.onValueChange&&this.onValueChange(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInteracting",{get:function(){return this._isInteracting},set:function(e){this._isInteracting!==e&&(this._isInteracting=e,this.onInteractionChange&&this.onInteractionChange(this._isInteracting))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numSteps",{get:function(){return(this.max-this.min)/this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valsDistribution",{get:function(){return this.spaceMaxFromZero?360/(this.numSteps+1):360/this.numSteps},enumerable:!0,configurable:!0}),t.prototype.getComputedTransformXY=function(e){if(!window.getComputedStyle||!e)return{x:0,y:0,scaleX:1,scaleY:1};var t=window.getComputedStyle(e),n=t.transform||t.webkitTransform;if(!n)return{x:0,y:0,scaleX:1,scaleY:1};var i=n.match(/^matrix3d\((.+)\)$/);if(i){var a=parseFloat(i[1].split(", ")[0]),o=parseFloat(i[1].split(", ")[5]);return{x:parseFloat(i[1].split(", ")[12]),y:parseFloat(i[1].split(", ")[13]),scaleX:a,scaleY:o}}var r=(i=n.match(/^matrix\((.+)\)$/))?parseFloat(i[1].split(", ")[0]):1,s=i?parseFloat(i[1].split(", ")[3]):1;return{x:i?parseFloat(i[1].split(", ")[4]):0,y:i?parseFloat(i[1].split(", ")[5]):0,scaleX:r,scaleY:s}},t.prototype.updateAreaLocation=function(e){for(var t=this.diameter/2,n=0,i=0,a=this.refElement.current,o=this.getComputedTransformXY(a);a;){if("BODY"==a.tagName.toUpperCase()){var r=a.scrollLeft||document.documentElement.scrollLeft,s=a.scrollTop||document.documentElement.scrollTop;n+=a.offsetLeft-r+a.clientLeft,i+=a.offsetTop-s+a.clientTop}else n+=a.offsetLeft-a.scrollLeft+a.clientLeft,i+=a.offsetTop-a.scrollTop+a.clientTop;n+=o.x,i+=o.y,o=this.getComputedTransformXY(a=a.offsetParent)}this._locationX=n+t,this._locationY=i+t,this._locationX+=e.pageX-e.clientX,this._locationY+=e.pageY-e.clientY},t.prototype.calcDegreeOfRotation=function(e,t){return Math.abs(180/Math.PI*Math.atan2(e-this._locationX,t-this._locationY)-180)},t.prototype.valueFromAngle=function(e){var n=this,i=this.min+e/(this.numSteps*this.valsDistribution)*(this.numSteps*this.step);return this.max+this.step/2<i?this.min:Array.from(Array(this.numSteps+1)).map(function(e,t){return n.min+t*n.step}).reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e})},t.prototype.angleFromValue=function(e){return Math.ceil((e-this.min)/this.step*this.valsDistribution)},t.prototype.updateAngleValue=function(t,n){var i=this;requestAnimationFrame(function(){var e=i.calcDegreeOfRotation(t,n);i.value=i.valueFromAngle(e),i.angle=i.angleFromValue(i.value)})},t.prototype.addWindowEventListeners=function(e){this.isInteracting=!0,this.windowEventListeners[e].forEach(function(e){window.addEventListener(e[0],e[1])})},t.prototype.removeWindowEventListeners=function(e){this.isInteracting=!1,this.windowEventListeners[e].forEach(function(e){window.removeEventListener(e[0],e[1])})},t);function t(e,t){var a=this;this.handleOnMouseDown=function(e){a.addWindowEventListeners("mouse");var t=e.pageX,n=e.pageY;a.updateAreaLocation({pageX:t,pageY:n,clientX:e.clientX,clientY:e.clientY}),a.updateAngleValue(t,n)},this.handleOnMouseMove=function(e){a.isInteracting&&a.updateAngleValue(e.pageX,e.pageY)},this.handleOnMouseUp=function(){a.removeWindowEventListeners("mouse")},this.handleOnTouchStart=function(e){if(a.addWindowEventListeners("touch"),"changedTouches"in e&&1===e.changedTouches.length){var t=e.changedTouches[0],n=t.pageX,i=t.pageY;a.updateAreaLocation({pageX:n,pageY:i,clientX:t.clientX,clientY:t.clientY}),a.updateAngleValue(n,i)}},this.handleOnTouchMove=function(e){if(a.isInteracting&&"changedTouches"in e&&1===e.changedTouches.length){var t=e.changedTouches[0];a.updateAngleValue(t.pageX,t.pageY)}},this.handleOnTouchEnd=function(){a.removeWindowEventListeners("touch")},this.handleOnFocus=function(){a.isInteracting=!0},this.handleOnBlur=function(){a.isInteracting=!1},this.handleOnKeyDown=function(e){38!==e.keyCode||a.max<a.value+a.step?40!==e.keyCode||a.value-a.step<a.min||(a.value-=a.step,a.angle=a.angleFromValue(a.value)):(a.value+=a.step,a.angle=a.angleFromValue(a.value))},this.onAngleChange=t.onAngleChange,this.onValueChange=t.onValueChange,this.onInteractionChange=t.onInteractionChange,this._locationX=0,this._locationY=0,this.refElement=e,this._isInteracting=!1,this.windowEventListeners={mouse:[["mousemove",this.handleOnMouseMove],["mouseup",this.handleOnMouseUp]],touch:[["touchmove",this.handleOnTouchMove],["touchend",this.handleOnTouchEnd]]},this.updateFromProps(t)}function p(e){return console&&console.error(e.error),u.createElement("div",{style:{width:e.diameter+"px",height:e.diameter+"px",borderRadius:e.diameter/2+"px",position:"relative",outline:"none",boxSizing:"border-box",overflow:"hidden"}},u.createElement("div",{style:{fontSize:"22px",fontWeight:"bold",color:"red",textAlign:"center",width:"100%",height:"100%",position:"absolute",zIndex:999,paddingTop:"calc(50% - 0.5em)",background:"rgba(0, 0, 0, 0.2)",pointerEvents:"none"}},"ðŸ’£"),e.children)}e.SkinWrap=function(e){var t=e.style||{},n=h(h({},{position:"relative",outline:"none",boxSizing:"border-box"}),t);return u.createElement("div",{style:n},e.children)},e.composeTwo=function(n,i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(void 0,e),i&&i.apply(void 0,e)}},e.default=function(e){var t=function(e){var t=l.useRef(null),n=l.useRef(null),i=null;try{n.current?n.current.updateFromProps(e):n.current=new c(t,e)}catch(e){i=e}return[t,n.current,i]}(e),n=t[0],i=t[1],a=t[2],o=e.knobStyle||{},r=h(h({},{width:e.diameter+"px",height:e.diameter+"px",borderRadius:e.diameter/2+"px",position:"relative",outline:"none",boxSizing:"border-box",overflow:"hidden"}),o),s=u.createElement("div",{ref:n,onMouseDown:i&&i.handleOnMouseDown,onTouchStart:i&&i.handleOnTouchStart,onKeyDown:i&&i.handleOnKeyDown,onFocus:i&&i.handleOnFocus,onBlur:i&&i.handleOnBlur,style:r,tabIndex:0,"aria-valuenow":e.value,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuetext":e.ariaValueText,"aria-labelledby":e.ariaLabelledBy},e.children);return a?u.createElement(p,{error:a,diameter:e.diameter},s):s},Object.defineProperty(e,"__esModule",{value:!0})});
